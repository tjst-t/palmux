/* gitbrowser.css - Git ブラウザ UI スタイル */

/* Git Browser View */
#gitbrowser-view {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

#gitbrowser-view.hidden {
  display: none;
}

#gitbrowser-container {
  flex: 1;
  overflow: hidden;
  --gb-font-size: 14px;
}

/* Git Browser wrapper */
.gb {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Loading / Empty / Error / Placeholder states */
.gb-loading {
  padding: 40px 16px;
  text-align: center;
  color: #8888aa;
  font-size: 14px;
}

.gb-empty {
  padding: 20px 16px;
  text-align: center;
  color: #8888aa;
  font-size: var(--gb-font-size, 14px);
}

.gb-error {
  padding: 40px 16px;
  text-align: center;
  color: #e57373;
  font-size: 14px;
}

.gb-placeholder {
  padding: 40px 16px;
  text-align: center;
  color: #8888aa;
  font-size: 16px;
}

/* Body wrapper (file section + divider + log section) */
.gb-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0;
}

/* File Section (upper part) */
.gb-file-section {
  flex: 0 0 60%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0;
}

.gb-file-header {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  background: #16213e;
  border-bottom: 1px solid #2a2a4a;
  min-height: 40px;
  font-size: var(--gb-font-size, 14px);
  font-weight: 600;
  color: #e0e0e0;
  flex-shrink: 0;
  gap: 8px;
  overflow: hidden;
}

.gb-file-header-title {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.gb-file-header-title--commit {
  color: #7ec8e3;
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
  font-size: calc(var(--gb-font-size, 14px) - 1px);
}

/* Reload button */
.gb-reload-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  min-height: 32px;
  background: none;
  border: 1px solid #2a2a4a;
  border-radius: 6px;
  color: #7ec8e3;
  font-size: 18px;
  cursor: pointer;
  flex-shrink: 0;
  transition: background 0.15s, transform 0.3s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.gb-reload-btn:hover {
  background: rgba(126, 200, 227, 0.15);
}

.gb-reload-btn:active {
  background: rgba(126, 200, 227, 0.25);
  transform: rotate(180deg);
}

.gb-file-header-back {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  min-height: 28px;
  background: none;
  border: 1px solid #2a2a4a;
  border-radius: 6px;
  color: #7ec8e3;
  font-size: 14px;
  cursor: pointer;
  flex-shrink: 0;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.gb-file-header-back:hover {
  background: rgba(126, 200, 227, 0.15);
}

.gb-file-header-back:active {
  background: rgba(126, 200, 227, 0.25);
}

.gb-file-list {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.gb-file-entry {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  min-height: 38px;
  border-bottom: 1px solid rgba(42, 42, 74, 0.4);
  cursor: pointer;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  gap: 10px;
}

.gb-file-entry:hover {
  background: rgba(126, 200, 227, 0.06);
}

.gb-file-entry:active {
  background: rgba(126, 200, 227, 0.12);
}

/* Status badge */
.gb-status-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 22px;
  height: 22px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 700;
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
  flex-shrink: 0;
}

.gb-status--modified {
  background: rgba(255, 183, 77, 0.2);
  color: #ffb74d;
}

.gb-status--added {
  background: rgba(129, 199, 132, 0.2);
  color: #81c784;
}

.gb-status--deleted {
  background: rgba(229, 115, 115, 0.2);
  color: #e57373;
}

.gb-status--untracked {
  background: rgba(136, 136, 170, 0.2);
  color: #8888aa;
}

.gb-status--renamed {
  background: rgba(100, 181, 246, 0.2);
  color: #64b5f6;
}

.gb-file-name {
  flex: 1;
  font-size: var(--gb-font-size, 14px);
  color: #e0e0e0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
}

/* Divider (draggable) */
.gb-divider {
  height: 12px;
  background: #2a2a4a;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: row-resize;
  touch-action: none;
  -webkit-tap-highlight-color: transparent;
  transition: background 0.15s;
}

.gb-divider:hover {
  background: #3a3a5a;
}

.gb-divider--dragging {
  background: #4a4a6a;
}

.gb-divider-handle {
  width: 32px;
  height: 4px;
  border-radius: 2px;
  background: #5a5a7a;
  transition: background 0.15s;
}

.gb-divider:hover .gb-divider-handle,
.gb-divider--dragging .gb-divider-handle {
  background: #7ec8e3;
}

/* Log Section (lower part) */
.gb-log-section {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  min-height: 0;
}

.gb-log-entry {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  min-height: 38px;
  border-bottom: 1px solid rgba(42, 42, 74, 0.4);
  cursor: pointer;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  gap: 10px;
}

.gb-log-entry:hover {
  background: rgba(126, 200, 227, 0.06);
}

.gb-log-entry:active {
  background: rgba(126, 200, 227, 0.12);
}

.gb-log-entry--selected {
  background: rgba(126, 200, 227, 0.12);
  border-left: 3px solid #7ec8e3;
}

.gb-log-hash {
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
  font-size: calc(var(--gb-font-size, 14px) - 2px);
  color: #7ec8e3;
  flex-shrink: 0;
  min-width: 56px;
}

.gb-log-subject {
  flex: 1;
  font-size: var(--gb-font-size, 14px);
  color: #e0e0e0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.gb-log-refs {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.gb-log-ref {
  display: inline-block;
  font-size: calc(var(--gb-font-size, 14px) - 3px);
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
  padding: 1px 6px;
  border-radius: 3px;
  white-space: nowrap;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.gb-log-ref--branch {
  background: rgba(126, 200, 227, 0.18);
  color: #7ec8e3;
}

.gb-log-ref--tag {
  background: rgba(129, 199, 132, 0.18);
  color: #81c784;
}

.gb-log-ref--remote {
  background: rgba(136, 136, 170, 0.15);
  color: #8888aa;
}

.gb-log-date {
  font-size: calc(var(--gb-font-size, 14px) - 2px);
  color: #8888aa;
  flex-shrink: 0;
  min-width: 32px;
  text-align: right;
}

/* Uncommitted changes log entry */
.gb-log-entry--uncommitted {
  border-bottom: 2px solid rgba(255, 183, 77, 0.2);
}

.gb-log-uncommitted-icon {
  font-size: 12px;
  color: #ffb74d;
  flex-shrink: 0;
  min-width: 16px;
  text-align: center;
}

.gb-log-uncommitted-badge {
  font-size: 11px;
  font-weight: 700;
  color: #1a1a3a;
  background: #ffb74d;
  min-width: 20px;
  height: 20px;
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 5px;
  flex-shrink: 0;
}

/* Branch Bar */
.gb-branch-bar {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  background: #16213e;
  border-top: 1px solid #2a2a4a;
  min-height: 40px;
  flex-shrink: 0;
  gap: 8px;
  cursor: pointer;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.gb-branch-bar:hover {
  background: rgba(22, 33, 62, 0.8);
}

.gb-branch-bar:active {
  background: rgba(126, 200, 227, 0.08);
}

.gb-branch-icon {
  font-size: 16px;
  flex-shrink: 0;
}

.gb-branch-name {
  flex: 1;
  font-size: var(--gb-font-size, 14px);
  color: #7ec8e3;
  font-weight: 600;
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.gb-branch-arrow {
  font-size: 10px;
  color: #8888aa;
  flex-shrink: 0;
}

/* Branch Picker */
.gb-branch-picker {
  position: absolute;
  bottom: 40px;
  left: 0;
  right: 0;
  max-height: 50%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background: #1a1a3a;
  border-top: 1px solid #2a2a4a;
  z-index: 10;
}

.gb-branch-item {
  display: flex;
  align-items: center;
  padding: 10px 12px;
  min-height: 44px;
  border-bottom: 1px solid rgba(42, 42, 74, 0.4);
  cursor: pointer;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  gap: 8px;
}

.gb-branch-item:hover {
  background: rgba(126, 200, 227, 0.06);
}

.gb-branch-item:active {
  background: rgba(126, 200, 227, 0.12);
}

.gb-branch-item--current {
  background: rgba(126, 200, 227, 0.08);
}

.gb-branch-item--remote .gb-branch-item-name {
  color: #8888aa;
}

.gb-branch-item-name {
  flex: 1;
  font-size: var(--gb-font-size, 14px);
  color: #e0e0e0;
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.gb-branch-item-badge {
  font-size: 11px;
  color: #7ec8e3;
  background: rgba(126, 200, 227, 0.15);
  padding: 2px 8px;
  border-radius: 10px;
  flex-shrink: 0;
}

/* Diff View */
.gb-diff-header {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  background: #16213e;
  border-bottom: 1px solid #2a2a4a;
  flex-shrink: 0;
  min-height: 40px;
  gap: 10px;
}

.gb-diff-back {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 36px;
  min-height: 36px;
  background: none;
  border: 1px solid #2a2a4a;
  border-radius: 6px;
  color: #7ec8e3;
  font-size: 16px;
  cursor: pointer;
  flex-shrink: 0;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.gb-diff-back:hover {
  background: rgba(126, 200, 227, 0.15);
}

.gb-diff-back:active {
  background: rgba(126, 200, 227, 0.25);
}

.gb-diff-filename {
  font-size: 14px;
  color: #e0e0e0;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
}

.gb-diff-content {
  flex: 1;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.gb-diff-pre {
  margin: 0;
  padding: 0;
  font-family: "Cascadia Code", "Fira Code", "Source Code Pro", monospace;
  font-size: calc(var(--gb-font-size, 14px) - 1px);
  line-height: 1.5;
}

.gb-diff-line {
  padding: 0 12px;
  white-space: pre-wrap;
  word-break: break-all;
  min-height: 1.5em;
}

.gb-diff-line--added {
  background: rgba(129, 199, 132, 0.12);
  color: #81c784;
}

.gb-diff-line--removed {
  background: rgba(229, 115, 115, 0.12);
  color: #e57373;
}

.gb-diff-line--hunk {
  background: rgba(100, 181, 246, 0.08);
  color: #64b5f6;
}

.gb-diff-line--meta {
  color: #8888aa;
}

/* Side-by-side diff (PC/iPad) */
.gb-diff-content--sbs {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.gb-diff-meta-block {
  flex-shrink: 0;
  border-bottom: 1px solid #2a2a4a;
}

.gb-diff-sbs {
  display: flex;
  flex: 1;
  overflow: hidden;
  min-height: 0;
}

.gb-diff-sbs-left,
.gb-diff-sbs-right {
  flex: 1;
  overflow: auto;
  min-width: 0;
  -webkit-overflow-scrolling: touch;
}

.gb-diff-sbs-left {
  border-right: 1px solid #2a2a4a;
}

.gb-diff-line--empty {
  background: rgba(42, 42, 74, 0.3);
}

/* Group headers for staged/unstaged separation */
.gb-group-header {
  padding: 6px 12px;
  font-size: calc(var(--gb-font-size, 14px) - 2px);
  font-weight: 600;
  color: #8888aa;
  background: rgba(22, 33, 62, 0.5);
  border-bottom: 1px solid rgba(42, 42, 74, 0.4);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  user-select: none;
  -webkit-user-select: none;
}

/* Context menu */
.gb-context-menu {
  position: fixed;
  min-width: 180px;
  background: #1a1a3a;
  border: 1px solid #3a3a5a;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  z-index: 100;
  overflow: hidden;
  animation: gb-menu-fade-in 0.15s ease;
}

@keyframes gb-menu-fade-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.gb-context-menu-item {
  padding: 12px 16px;
  font-size: var(--gb-font-size, 14px);
  color: #e0e0e0;
  cursor: pointer;
  transition: background 0.15s;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  user-select: none;
  -webkit-user-select: none;
}

.gb-context-menu-item:not(:last-child) {
  border-bottom: 1px solid rgba(42, 42, 74, 0.4);
}

.gb-context-menu-item:hover {
  background: rgba(126, 200, 227, 0.1);
}

.gb-context-menu-item:active {
  background: rgba(126, 200, 227, 0.2);
}

.gb-context-menu-item--danger {
  color: #e57373;
}

.gb-context-menu-item--danger:hover {
  background: rgba(229, 115, 115, 0.1);
}

/* Mobile optimizations */
@media (max-width: 600px) {
  .gb-file-header {
    padding: 6px 8px;
    min-height: 36px;
    font-size: calc(var(--gb-font-size, 13px) - 1px);
  }

  .gb-file-entry {
    padding: 6px 10px;
    min-height: 34px;
    gap: 8px;
  }

  .gb-status-badge {
    min-width: 20px;
    height: 20px;
    font-size: 10px;
  }

  .gb-file-name {
    font-size: var(--gb-font-size, 13px);
  }

  .gb-log-entry {
    padding: 6px 10px;
    min-height: 34px;
    gap: 8px;
  }

  .gb-log-hash {
    font-size: calc(var(--gb-font-size, 13px) - 2px);
    min-width: 48px;
  }

  .gb-log-subject {
    font-size: var(--gb-font-size, 13px);
  }

  .gb-log-ref {
    font-size: calc(var(--gb-font-size, 13px) - 3px);
    max-width: 80px;
    padding: 1px 4px;
  }

  .gb-log-date {
    font-size: calc(var(--gb-font-size, 13px) - 2px);
  }

  .gb-branch-bar {
    padding: 6px 8px;
    min-height: 36px;
  }

  .gb-branch-name {
    font-size: var(--gb-font-size, 13px);
  }

  .gb-branch-item {
    padding: 8px 10px;
    min-height: 40px;
  }

  .gb-branch-item-name {
    font-size: var(--gb-font-size, 13px);
  }

  .gb-diff-header {
    padding: 6px 8px;
    min-height: 36px;
    gap: 8px;
  }

  .gb-diff-back {
    min-width: 32px;
    min-height: 32px;
    font-size: 14px;
  }

  .gb-diff-filename {
    font-size: 13px;
  }

  .gb-diff-pre {
    font-size: calc(var(--gb-font-size, 13px) - 1px);
  }

  .gb-diff-line {
    padding: 0 8px;
  }

  .gb-group-header {
    padding: 5px 10px;
    font-size: calc(var(--gb-font-size, 13px) - 2px);
  }

  .gb-context-menu {
    min-width: 160px;
  }

  .gb-context-menu-item {
    padding: 14px 16px;
    font-size: var(--gb-font-size, 13px);
    min-height: 44px;
    display: flex;
    align-items: center;
  }
}

/* 3-pane wide layout (1024px+) */
@media (min-width: 1024px) {
  .gb-body--wide {
    flex-direction: row;
  }

  .gb-left-pane {
    min-width: 280px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    flex-shrink: 0;
  }

  .gb-right-pane {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;
  }

  .gb-right-pane-placeholder {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #8888aa;
    font-size: 14px;
  }

  /* 左右ヘッダーの高さを揃える */
  .gb-body--wide .gb-file-header,
  .gb-diff-header--pane {
    box-sizing: border-box;
    height: 44px;
    min-height: 44px;
  }

  .gb-diff-header--pane {
    border-bottom: 1px solid #2a2a4a;
  }

  .gb-file-entry--selected {
    background: rgba(126, 200, 227, 0.12);
    border-left: 3px solid #7ec8e3;
  }

  /* 横分割ドラッグハンドル */
  .gb-hdivider {
    width: 8px;
    background: #2a2a4a;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: col-resize;
    touch-action: none;
    -webkit-tap-highlight-color: transparent;
    transition: background 0.15s;
  }

  .gb-hdivider:hover {
    background: #3a3a5a;
  }

  .gb-hdivider--dragging {
    background: #4a4a6a;
  }

  .gb-hdivider-handle {
    width: 4px;
    height: 32px;
    border-radius: 2px;
    background: #5a5a7a;
    transition: background 0.15s;
  }

  .gb-hdivider:hover .gb-hdivider-handle,
  .gb-hdivider--dragging .gb-hdivider-handle {
    background: #7ec8e3;
  }
}
